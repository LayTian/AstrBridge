## 先回答你关于“env token 写死”的疑问
- 现在 .env 里写的不是“登录后生成的 token”，而是**签发 token 的密钥**（ADMIN_TOKEN_SECRET）和登录用的账号密码（ADMIN_USERNAME/ADMIN_PASSWORD）。
- **时效 token**是在你调用 `POST /api/auth/login` 且账号密码正确时，由后端动态生成的（包含 exp 过期时间），前端拿到后存起来并在请求时以 `Authorization: Bearer <token>` 发送。
- 之所以你会觉得“写死 token”，是因为项目里仍保留了一个兼容开关：`ADMIN_TOKEN`（固定 token）模式。如果 `.env` 里设置了 ADMIN_TOKEN，就会允许用这个固定 token 直接访问 /api（用于兼容早期方案/快速调试）。正式方案建议只用 `ADMIN_TOKEN_SECRET`（签发/校验）而不使用 `ADMIN_TOKEN`。

## 目标
- 让鉴权实现更“标准”：账号密码登录 → 短期 Access Token（带 exp）→ Bearer 鉴权；可选 Refresh Token。
- 让项目更像毕设交付：文档、测试、告警/审计、权限/角色等可写章节。

## 鉴权规范化（建议优先做）
1. **移除/禁用固定 token 兼容模式**：默认不再支持 ADMIN_TOKEN；或仅在 `NODE_ENV=development` 时允许。
2. **完善登录返回结构**：补充 `token_type=Bearer`、`expires_in`；前端按标准字段处理。
3. **刷新机制（可选）**：增加 `POST /api/auth/refresh`（Refresh Token 存 httpOnly cookie 或本地存储），Access Token 过期可自动刷新。
4. **登出与吊销（可选）**：增加 token jti、黑名单/版本号（token_version），做到“退出后 token 立即失效”。
5. **限流与安全**：登录接口加 rate limit；密码改为 hash（bcrypt/argon2，按现有依赖决定）；错误提示避免泄露信息。

## 毕设加分模块（从下列选 3–5 个就很稳）
1. **审计日志**：记录管理员登录/踢人/发消息/修改配置；后台提供筛选、导出。
2. **角色权限（RBAC）**：admin/operator/viewer；将高危操作（踢人、发送）限制到角色。
3. **健康度评分 + 告警**：把“数据分析”页输出一个可解释的健康度（队列积压、在线率、错误率、延迟等），并支持阈值告警。
4. **服务端聚合指标**：把趋势数据从“前端 localStorage 采样”升级为“后端聚合 + 持久化”，支持多客户端一致。
5. **测试与交付**：补接口测试（auth/login、auth/verify、核心 /api），补部署/配置文档、演示脚本和截图。

## 落地顺序（最小风险到最大收益）
1. 鉴权规范化：去掉 ADMIN_TOKEN 固定模式 + 补充返回字段 + 登录限流。
2. 审计日志 + RBAC（论文写作素材最足）。
3. 健康度评分与告警（演示效果最好）。
4. 服务端指标聚合与持久化（工程性强）。
5. 补测试与文档收尾（保证可交付）。

## 需要你确认的两点（我默认按常规做）
- 是否彻底移除 `ADMIN_TOKEN` 固定 token 模式（推荐：移除/仅 dev 允许）。
- token 策略：只做 Access Token（最简）还是加 Refresh Token（更标准但工作量略大）。